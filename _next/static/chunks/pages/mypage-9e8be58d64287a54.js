(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{7712:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mypage",function(){return a(1988)}])},5511:function(e,t,a){"use strict";a.d(t,{$:function(){return o}});var n=a(5893),s=a(7889),i=a.n(s);let o=()=>(0,n.jsx)("div",{className:i().container,children:(0,n.jsxs)("div",{className:i().content,children:[(0,n.jsx)("div",{className:i().logoSection,children:(0,n.jsx)("div",{className:i().logo,children:"Spica"})}),(0,n.jsxs)("div",{className:i().navSection,children:[(0,n.jsxs)("div",{className:i().navItem,children:[(0,n.jsx)("div",{className:i().navLabel,children:"サービスtoha"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"})]}),(0,n.jsxs)("div",{className:i().navItem,children:[(0,n.jsx)("div",{className:i().navLabel,children:"サービスaaaaaaaaaaaaaa"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"})]}),(0,n.jsxs)("div",{className:i().navItem,children:[(0,n.jsx)("div",{className:i().navLabel,children:"サービス"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービスaaaaaaaaaaaaa1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"})]}),(0,n.jsxs)("div",{className:i().navItem,children:[(0,n.jsx)("div",{className:i().navLabel,children:"サービス"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービスaaaaaaaaaaaaa1"}),(0,n.jsx)("a",{className:i().subNavItem,children:"サービス1"})]})]})]})})},1587:function(e,t,a){"use strict";a.d(t,{h:function(){return l}});var n=a(5893),s=a(1163),i=a(7294),o=a(1014),c=a.n(o);let l=()=>{let[e,t]=(0,i.useState)(!1),a=(0,s.useRouter)(),o=async()=>{a.push("/login")},l=()=>{a.push("/signup")};return(0,i.useEffect)(()=>{let e=()=>{window.innerWidth>=800&&t(!1)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),(0,i.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[e]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsx)("div",{className:c().left,children:"Spica"}),(0,n.jsxs)("div",{className:c().right,children:[(0,n.jsx)("span",{children:"ビジョン"}),(0,n.jsx)("span",{children:"ニュース"}),(0,n.jsx)("span",{children:"お問い合わせ"}),"/login"!==a.pathname&&"/mypage"!==a.pathname&&(0,n.jsx)("span",{onClick:o,children:"ログイン"}),"/signup"!==a.pathname&&"/mypage"!==a.pathname&&(0,n.jsx)("span",{className:c().account,onClick:l,children:"アカウント開設"})]}),(0,n.jsxs)("div",{className:"".concat(c().menuButton," ").concat(e?c().open:""),onClick:()=>t(!e),children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})]}),(0,n.jsx)("div",{className:c().menu,children:e&&(0,n.jsxs)("div",{className:c().dropdown,children:[(0,n.jsx)("span",{className:c().menuItem,onClick:()=>t(!1),children:"ビジョン"}),(0,n.jsx)("span",{className:c().menuItem,onClick:()=>t(!1),children:"ニュース"}),(0,n.jsx)("span",{className:c().menuItem,onClick:()=>t(!1),children:"お問い合わせ"}),"/login"!==a.pathname&&"/mypage"!==a.pathname&&(0,n.jsx)("span",{className:c().menuItem,onClick:o,children:"ログイン"}),"/signup"!==a.pathname&&"/mypage"!==a.pathname&&(0,n.jsx)("span",{className:c().menuItem,onClick:l,children:"アカウント開設"})]})})]})}},3970:function(e,t,a){"use strict";a.d(t,{E:function(){return c}});var n=a(8583),s=a(7294),i=a(5371),o=a(3376);let c=()=>{let[e]=(0,n.KO)(i.L),[t,a]=(0,s.useState)(null),c=(0,s.useCallback)(async()=>{if(!e)return;let t=await o.x.employee.employeeId.$post({body:{firebaseUid:e.id}});null!==t&&a(t)},[e,a]);return{employeeInformation:t,getEmployeeInformation:c}}},1988:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var n=a(5893),s=a(8583),i=a(5371),o=a(5511),c=a(1587),l=a(7294),r=a(3970),d=a(3414),m=a.n(d);let h=e=>{let{employeeInformation:t}=e;return(0,n.jsxs)("div",{className:m().left,children:[(0,n.jsx)("div",{className:m().icon,children:(0,n.jsx)("div",{className:m().iconImage,style:{backgroundImage:"url(".concat(null==t?void 0:t.profileImage,")")}})}),(0,n.jsxs)("div",{className:m().userInfo,children:[(0,n.jsx)("div",{className:m().name,children:null==t?void 0:t.name}),(0,n.jsx)("a",{href:"/mypage/profile/",className:m().button,children:"プロフィールを編集"}),(0,n.jsxs)("div",{className:m().profileCompletion,children:[(0,n.jsxs)("div",{className:m().profileCompletionLabel,children:["プロフィール入力率: ",50,"% 完了"]}),(0,n.jsx)("div",{className:m().profileCompletionBar,children:(0,n.jsx)("div",{className:m().profileCompletionBarFill,style:{width:"".concat(50,"%")}})})]})]})]})};var _=a(4231),u=a.n(_),p=a(3148),j=a(1163),x=a(2592),N=a(6495);let v=e=>{let t={};return e.forEach(e=>{let a=new Date(e.createdAt),n="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"));t[n]=(t[n]||0)+e.amount}),t},g=["bronze","silver","gold"],f={gold:"/images/trophy/gold_trophy.png",silver:"/images/trophy/silver_trophy.png",bronze:"/images/trophy/bronze_trophy.png"},b=e=>{let t=0,a=0,n=0,s=[],i={gold:{},silver:{},bronze:{}},o={amount:[1e4,3e4,5e4],count:[10,50,100],singleTip:[1e3,3e3,5e3]},c=(e,t,a,n)=>{g.forEach((s,o)=>{!i[s][e]&&t>=n[o]&&(i[s][e]=new Date(a).toLocaleDateString())})};return e.sort((e,t)=>e.createdAt-t.createdAt).forEach(e=>{t+=e.amount,a++,n=Math.max(n,e.amount),c("amount",t,e.createdAt,o.amount),c("count",a,e.createdAt,o.count),c("singleTip",n,e.createdAt,o.singleTip)}),g.forEach(e=>{Object.keys(o).forEach(t=>{i[e][t]&&s.push({type:"amount"===t?"累計金額":"count"===t?"チップ回数":"最高チップ金額",grade:e,date:i[e][t]})})}),s};var y=a(7267),S=a.n(y);p.kL.register(p.uw,p.f$,p.ZL,p.vn);let I=e=>{let{employeeInformation:t}=e,a=(0,j.useRouter)(),s="test_user",i="test_company",[o,c]=(0,l.useState)(null),[r,d]=(0,l.useState)(0),[m,h]=(0,l.useState)({labels:[],datasets:[]}),[_,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{if(t&&null!==t.tips){let e=t.tips.reduce((e,t)=>e+t.amount,0);d(e);let a=b(t.tips);u(a);let n=v(t.tips);h({labels:Object.keys(n),datasets:[{label:"月別チップ金額",data:Object.values(n),backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,barThickness:24}]})}},[t]);let p=async()=>{let e="/tip/".concat(i,"/").concat(s);try{let t=await x.toDataURL(e);c(t)}catch(e){return console.error(e),null}};return(0,n.jsxs)("div",{className:S().right,children:[(0,n.jsxs)("div",{className:S().jobExperience,children:[(0,n.jsxs)("div",{className:S().jobList,children:[(0,n.jsx)("h3",{className:S().jobTitle,children:"仕事先"}),(0,n.jsx)("div",{className:S().jobHistoryList,children:null==t?void 0:t.employeeCompanies.map((e,t)=>(0,n.jsxs)("div",{className:S().jobHistory,children:["・",e.companyName]},t))})]}),(0,n.jsxs)("div",{className:S().totalAmount,children:[(0,n.jsx)("h3",{className:S().totalTitle,children:"今まで稼いだ金額"}),(0,n.jsxs)("div",{className:S().totalAmountYen,children:[(0,n.jsx)("span",{className:S().smallText,children:"今まで稼いだ金額は"}),(0,n.jsxs)("span",{className:S().largeText,children:[r,"円"]})]})]})]}),(0,n.jsxs)("div",{className:S().trophySection,children:[(0,n.jsxs)("h3",{className:S().trophyTitle,children:[(0,n.jsx)("div",{className:S().trophyTitleName,children:"獲得したトロフィー"}),_.length>=5&&(0,n.jsx)("span",{className:S().viewAll,children:"すべて見る＞"})]}),(0,n.jsx)("div",{className:S().trophyContainer,children:(()=>{let e=[..._].reverse().slice(0,5);return e.map((e,t)=>(0,n.jsxs)("div",{className:S().trophyItem,children:[(0,n.jsx)("img",{src:f[e.grade],alt:"".concat(e.grade," trophy"),className:S().trophyIcon}),(0,n.jsxs)("p",{className:S().trophyDescription,children:[e.type," ",e.grade.toUpperCase()," 達成"]}),(0,n.jsxs)("p",{className:S().trophyDate,children:["達成日: ",e.date]})]},t))})()})]}),(0,n.jsxs)("div",{className:S().earningsBarChart,children:[(0,n.jsx)("h3",{className:S().barTitle,children:"月別チップ金額"}),(0,n.jsx)(N.$Q,{className:S().barChart,data:m,options:{scales:{y:{beginAtZero:!0}}}})]}),(0,n.jsxs)("div",{className:S().qrcodeSection,children:[(0,n.jsx)("h3",{className:S().qrcodeTitle,children:"QRコードを表示"}),(0,n.jsxs)("div",{className:S().qrcodeContainer,children:[(0,n.jsx)("button",{className:S().qrcodeButton,onClick:()=>{a.push("/tip/".concat(i,"/").concat(s))},children:"PayPay支払いページにとぶ"}),(0,n.jsx)("button",{className:S().qrcodeButton,onClick:p,children:"QRコード作成"}),null!==o&&(0,n.jsx)("img",{className:S().qrcode,src:o})]})]})]})},C=()=>{let{employeeInformation:e,getEmployeeInformation:t}=(0,r.E)();return(0,l.useEffect)(()=>{e||t()},[e,t]),(0,n.jsx)("div",{className:u().container,children:(0,n.jsxs)("div",{className:u().form,children:[(0,n.jsx)(h,{employeeInformation:e}),(0,n.jsx)(I,{employeeInformation:e})]})})};var L=()=>{let[e]=(0,s.KO)(i.L);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.h,{}),(0,n.jsx)(C,{}),(0,n.jsx)(o.$,{})]})}},7889:function(e){e.exports={container:"Footer_container__Dj1D9",content:"Footer_content__a1cH7",logoSection:"Footer_logoSection__60cxm",logo:"Footer_logo__C9vo8",navSection:"Footer_navSection__F3PZo",navItem:"Footer_navItem__8Yj1Y",navLabel:"Footer_navLabel__NydQx",subNavItem:"Footer_subNavItem__AWV74"}},1014:function(e){e.exports={container:"Header_container__3JNoS",left:"Header_left__2EE3i",right:"Header_right__IaiY4",account:"Header_account__usRDz",menuButton:"Header_menuButton__mlszh",open:"Header_open__jNVWy",menu:"Header_menu__UYmdC",dropdown:"Header_dropdown__f5upL",menuItem:"Header_menuItem__DuO3o"}},3414:function(e){e.exports={left:"LeftSection_left__Ij3WJ",icon:"LeftSection_icon__tasBC",iconImage:"LeftSection_iconImage__k6gIN",userInfo:"LeftSection_userInfo__zIthu",name:"LeftSection_name__ySDj7",button:"LeftSection_button__jmeV9",profileCompletion:"LeftSection_profileCompletion__7Taot",profileCompletionLabel:"LeftSection_profileCompletionLabel__PsLxG",profileCompletionBar:"LeftSection_profileCompletionBar__1mQ_t",profileCompletionBarFill:"LeftSection_profileCompletionBarFill__wCsH0"}},4231:function(e){e.exports={container:"MySection_container__zCc_F",form:"MySection_form__2dJ2V"}},7267:function(e){e.exports={right:"RightSection_right__9wpAT",jobExperience:"RightSection_jobExperience__bJxrv",earningsBarChart:"RightSection_earningsBarChart__WIuBd",trophySection:"RightSection_trophySection__ib0ON",jobList:"RightSection_jobList__kkYxu",jobHistoryList:"RightSection_jobHistoryList__sBlHM",jobHistory:"RightSection_jobHistory__5U9KL",totalAmount:"RightSection_totalAmount__cYZFe",totalAmountYen:"RightSection_totalAmountYen__4SExQ",smallText:"RightSection_smallText__qXfRt",largeText:"RightSection_largeText__rZxZp",jobTitle:"RightSection_jobTitle__UGWDF",totalTitle:"RightSection_totalTitle__dN6bN",barTitle:"RightSection_barTitle__XO3Un",trophyTitle:"RightSection_trophyTitle__IFV9l",qrcodeTitle:"RightSection_qrcodeTitle__OXfmZ",barChart:"RightSection_barChart__L2Cfo",trophyTitleName:"RightSection_trophyTitleName__DkGmm",viewAll:"RightSection_viewAll__v0G6Z",trophyContainer:"RightSection_trophyContainer__Pd0UO",trophyItem:"RightSection_trophyItem__a17Pk",trophyIcon:"RightSection_trophyIcon__dDHye",trophyDescription:"RightSection_trophyDescription__5KFfd",trophyDate:"RightSection_trophyDate__pf_hT",qrcodeSection:"RightSection_qrcodeSection__HHrLF",qrcodeContainer:"RightSection_qrcodeContainer__g2gln",qrcodeButton:"RightSection_qrcodeButton__teQNq",qrcode:"RightSection_qrcode__gnp1E"}}},function(e){e.O(0,[196,592,853,774,888,179],function(){return e(e.s=7712)}),_N_E=e.O()}]);