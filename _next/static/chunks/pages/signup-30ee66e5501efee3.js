(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{5975:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return t(2997)}])},5511:function(e,a,t){"use strict";t.d(a,{$:function(){return r}});var s=t(5893),n=t(7889),o=t.n(n);let r=()=>(0,s.jsx)("div",{className:o().container,children:(0,s.jsxs)("div",{className:o().content,children:[(0,s.jsx)("div",{className:o().logoSection,children:(0,s.jsx)("div",{className:o().logo,children:"Spica"})}),(0,s.jsxs)("div",{className:o().navSection,children:[(0,s.jsxs)("div",{className:o().navItem,children:[(0,s.jsx)("div",{className:o().navLabel,children:"サービスtoha"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"})]}),(0,s.jsxs)("div",{className:o().navItem,children:[(0,s.jsx)("div",{className:o().navLabel,children:"サービスaaaaaaaaaaaaaa"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"})]}),(0,s.jsxs)("div",{className:o().navItem,children:[(0,s.jsx)("div",{className:o().navLabel,children:"サービス"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービスaaaaaaaaaaaaa1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"})]}),(0,s.jsxs)("div",{className:o().navItem,children:[(0,s.jsx)("div",{className:o().navLabel,children:"サービス"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービスaaaaaaaaaaaaa1"}),(0,s.jsx)("a",{className:o().subNavItem,children:"サービス1"})]})]})]})})},1587:function(e,a,t){"use strict";t.d(a,{h:function(){return i}});var s=t(5893),n=t(1163),o=t(7294),r=t(1014),c=t.n(r);let i=()=>{let[e,a]=(0,o.useState)(!1),t=(0,n.useRouter)(),r=async()=>{t.push("/login")};return(0,o.useEffect)(()=>{let e=()=>{window.innerWidth>=800&&a(!1)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),(0,o.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[e]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsx)("div",{className:c().left,children:"Spica"}),(0,s.jsxs)("div",{className:c().right,children:[(0,s.jsx)("span",{children:"ビジョン"}),(0,s.jsx)("span",{children:"ニュース"}),(0,s.jsx)("span",{children:"お問い合わせ"}),"/login"!==t.pathname&&"/mypage"!==t.pathname&&(0,s.jsx)("span",{onClick:r,children:"ログイン"}),"/signup"!==t.pathname&&"/mypage"!==t.pathname&&(0,s.jsx)("span",{className:c().account,onClick:()=>{t.push("/signup")},children:"アカウント開設"})]}),(0,s.jsxs)("div",{className:"".concat(c().menuButton," ").concat(e?c().open:""),onClick:()=>a(!e),children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]})]}),(0,s.jsx)("div",{className:c().menu,children:e&&(0,s.jsxs)("div",{className:c().dropdown,children:[(0,s.jsx)("span",{className:c().menuItem,onClick:()=>a(!1),children:"ビジョン"}),(0,s.jsx)("span",{className:c().menuItem,onClick:()=>a(!1),children:"ニュース"}),(0,s.jsx)("span",{className:c().menuItem,onClick:()=>a(!1),children:"お問い合わせ"}),"/login"!==t.pathname&&"/mypage"!==t.pathname&&(0,s.jsx)("span",{className:c().menuItem,onClick:()=>a(!1),children:"ログイン"}),"/signup"!==t.pathname&&"/mypage"!==t.pathname&&(0,s.jsx)("span",{className:c().menuItem,onClick:()=>a(!1),children:"アカウント開設"})]})})]})}},2997:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var s=t(5893),n=t(5511),o=t(1163),r=t(7294),c=t(9777),i=t(1259),l=t(3571);let d=async(e,a)=>{try{let t=(0,l.l)(),s=await (0,i.Xb)(t,e,a);return s.user}catch(e){throw console.error("Error signing up with email and password:",e),e}};var m=t(1293),p=t.n(m);let h=e=>{let{firstName:a,setFirstName:t,lastName:n,setLastName:o,email:r,setEmail:c,password:i,setPassword:l,passwordConfirmation:d,setPasswordConfirmation:m,emailPreferences:p,setEmailPreferences:h,errors:u,setErrors:x,handleNextClick:j,styles:_}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:_.title,children:"アカウント登録"}),(0,s.jsxs)("form",{children:[(0,s.jsxs)("div",{className:_.formGroup,children:[(0,s.jsx)("label",{children:"氏名"}),(0,s.jsxs)("div",{className:_.nameInput,children:[(0,s.jsxs)("div",{className:_.nameArea,children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"山田"}),null!==u.lastName&&(0,s.jsx)("div",{className:_.error,children:u.lastName})]}),(0,s.jsxs)("div",{className:_.nameArea,children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>t(e.target.value),placeholder:"太郎"}),null!==u.firstName&&(0,s.jsx)("div",{className:_.error,children:u.firstName})]})]})]}),(0,s.jsxs)("div",{className:_.formGroup,children:[(0,s.jsx)("label",{children:"メールアドレス"}),(0,s.jsx)("input",{type:"email",value:r,onChange:e=>c(e.target.value),placeholder:"example@example.com"}),null!==u.email&&(0,s.jsx)("div",{className:_.error,children:u.email})]}),(0,s.jsxs)("div",{className:_.formGroup,children:[(0,s.jsx)("label",{children:"パスワード"}),(0,s.jsx)("input",{type:"password",value:i,onChange:e=>l(e.target.value),onBlur:()=>{if(i.length<6){x(e=>({...e,password:"パスワードは6文字以上の半角英数字で入力してください。"}));return}if(!/^[a-zA-Z0-9]+$/.test(i)){x(e=>({...e,password:"パスワードは6文字以上の半角英数字で入力してください。"}));return}},placeholder:"6文字以上の半角英数字"}),null!==u.password&&(0,s.jsx)("div",{className:_.error,children:u.password})]}),(0,s.jsxs)("div",{className:_.formGroup,children:[(0,s.jsx)("label",{children:"パスワード（確認）"}),(0,s.jsx)("input",{type:"password",value:d,onChange:e=>m(e.target.value),placeholder:"6文字以上の半角英数字"}),null!==u.passwordConfirmation&&(0,s.jsx)("div",{className:_.error,children:u.passwordConfirmation})]})]}),(0,s.jsx)("button",{className:_.createButton,type:"button",onClick:j,children:"つぎへ"})]})},u=e=>{let{email:a,handleNextClick:t,verificationCode:n,setVerificationCode:o,sentCode:c,sendEmailVerification:i,styles:l}=e,[d,m]=(0,r.useState)(""),p=(0,r.useRef)([]),h=(e,a)=>{let t=a.match(/[０-９]/)?a.replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)):a;if(""===t||t.match(/^\d$/)){let a=[...n];if(a[e]=t,o(a),t.match(/^\d$/)){let a=p.current[e+1];a&&a.focus()}}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:l.title,children:"メールアドレス認証"}),(0,s.jsx)("form",{children:(0,s.jsxs)("div",{className:l.formGroup,children:[(0,s.jsxs)("p",{className:l.certificationMail,children:["認証コードを ",a," に送信しました。"]}),(0,s.jsx)("p",{className:l.mail,children:"メール受信箱を確認し、下記に認証コードを入力してあなたのメールアドレスを認証してください。"}),(0,s.jsx)("div",{className:l.codeInputContainer,children:Array.from({length:6}).map((e,a)=>(0,s.jsx)("input",{type:"text",value:n[a],onChange:e=>h(a,e.target.value),maxLength:1,className:l.codeInput,ref:e=>p.current[a]=e},a))}),d&&(0,s.jsx)("p",{className:l.error,children:d})]})}),(0,s.jsx)("button",{className:l.createButton,onClick:()=>{n.join("")===c?t():m("認証コードが正しくありません。")},children:"確認"}),(0,s.jsx)("button",{className:l.resendButton,onClick:i,children:"コードを再送"})]})},x=e=>{let{styles:a,firstName:t,lastName:n,email:o,password:r,emailPreferences:c,handleNextClick:i,handlebackClick:l}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:a.title,children:"登録情報確認"}),(0,s.jsxs)("form",{children:[(0,s.jsxs)("div",{className:a.formGroup,children:[(0,s.jsx)("label",{className:a.formLabel,children:"氏名"}),(0,s.jsxs)("div",{className:a.nameInput,children:[(0,s.jsx)("p",{className:a,children:n}),(0,s.jsx)("p",{children:t})]})]}),(0,s.jsxs)("div",{className:a.formGroup,children:[(0,s.jsx)("label",{className:a.formLabel,children:"メールアドレス"}),(0,s.jsx)("p",{children:o})]}),(0,s.jsxs)("div",{className:a.formGroup,children:[(0,s.jsx)("label",{className:a.formLabel,children:"パスワード"}),(0,s.jsx)("p",{children:r.replace(/./g,"●")})]}),(0,s.jsxs)("div",{className:a.formGroup,children:[(0,s.jsx)("label",{className:a.formLabel,children:"メール設定"}),(0,s.jsx)("p",{children:c?"希望する":"希望しない"})]})]}),(0,s.jsxs)("div",{className:a.buttonContainer,children:[(0,s.jsx)("button",{className:a.changeStepButton,type:"button",onClick:l,children:"修正する"}),(0,s.jsx)("button",{className:a.changeStepButton,type:"button",onClick:i,children:"つぎへ"})]})]})},j=()=>{let e=(0,o.useRouter)(),[a,t]=(0,r.useState)(1),[n,i]=(0,r.useState)(""),[l,m]=(0,r.useState)(""),[j,_]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),[S,C]=(0,r.useState)({}),[E,$]=(0,r.useState)([]),[w,I]=(0,r.useState)(null),G=()=>{let e={},a=RegExp("^[\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Han}ーa-zA-Z\\s]+$","u");return l&&"string"==typeof l&&a.test(l)||(e.lastName="正しい苗字を入力してください。"),n&&"string"==typeof n&&a.test(n)||(e.firstName="正しい名前を入力してください。"),j&&"string"==typeof j&&/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(j)||(e.email="有効なメールアドレスを入力してください。"),l&&"string"==typeof l||(e.lastName="苗字が未記入です"),n&&"string"==typeof n||(e.firstName="名前が未記入です"),j&&"string"==typeof j||(e.email="メールアドレスが未記入です"),v&&"string"==typeof v||(e.password="パスワードが未記入です"),v.length<6?e.password="パスワードは6文字以上の半角英数字で入力してください。":/^[a-zA-Z0-9]+$/.test(v)||(e.password="パスワードは6文字以上の半角英数字で入力してください。"),("string"!=typeof v||"string"!=typeof f||v!==f)&&(e.passwordConfirmation="パスワードが一致していません。"),e},F=()=>{let e=Math.floor(1e6*Math.random()).toString().padStart(6,"0");return e.split("")},T=()=>{let e=F();I(e.join("")),c.x.mailVerification.$post({body:{email:j,code:e.join("")}})},k=async()=>{let s=G();if(0===Object.keys(s).length){if(2===a)T();else if(3===a)try{let a=await d(j,v);await c.x.employee.$post({body:{name:"".concat(l," ").concat(n),email:j,firebaseUid:a.uid}}),e.push("/mypage")}catch(e){console.error("Error signing up:",e)}t(a+1)}else C(s)};return(0,s.jsxs)("div",{className:p().container,children:[(0,s.jsxs)("div",{className:p().progressContainer,children:[(0,s.jsx)("div",{className:"".concat(p().progressStep," ").concat(1===a?p().activeStep:""),children:"1.仮登録"}),(0,s.jsx)("div",{className:"".concat(p().progressStep," ").concat(2===a?p().activeStep:""),children:"2.仮登録確認"}),(0,s.jsx)("div",{className:"".concat(p().progressStep," ").concat(3===a?p().activeStep:""),children:"3.メールアドレス認証"})]}),(0,s.jsxs)("div",{className:p().form,children:[1===a&&(0,s.jsx)(h,{firstName:n,setFirstName:i,lastName:l,setLastName:m,email:j,setEmail:_,password:v,setPassword:N,passwordConfirmation:f,setPasswordConfirmation:g,emailPreferences:b,setEmailPreferences:y,errors:S,setErrors:C,handleNextClick:k,styles:p()}),2===a&&(0,s.jsx)(x,{firstName:n,lastName:l,email:j,password:v,emailPreferences:b,handleNextClick:k,handlebackClick:()=>{t(a-1)},styles:p()}),3===a&&(0,s.jsx)(u,{email:j,handleNextClick:k,verificationCode:E,setVerificationCode:$,sentCode:w,sendEmailVerification:T,styles:p()})]})]})};var _=t(1587),v=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.h,{}),(0,s.jsx)(j,{}),(0,s.jsx)(n.$,{})]})},9777:function(e,a,t){"use strict";t.d(a,{x:function(){return c}});var s=t(9239),n=t(7080),o=t(6154),r=t(3454);let c=(e=>{let{baseURL:a,fetch:t}=e,s=(void 0===a?"":a).replace(/\/$/,""),o="/employee",r="/health",c="/mailVerification",i="/paypay",l="/paypay/payment",d="/paypay/qrcode",m="/session",p="/tasks",h="/tasks/di",u="POST",x="DELETE",j="PATCH";return{employee:{get:e=>t(s,o,"GET",e).text(),$get:e=>t(s,o,"GET",e).text().then(e=>e.body),post:e=>t(s,o,u,e).send(),$post:e=>t(s,o,u,e).send().then(e=>e.body),$path:()=>"".concat(s).concat(o)},health:{get:e=>t(s,r,"GET",e).json(),$get:e=>t(s,r,"GET",e).json().then(e=>e.body),$path:()=>"".concat(s).concat(r)},mailVerification:{get:e=>t(s,c,"GET",e).text(),$get:e=>t(s,c,"GET",e).text().then(e=>e.body),post:e=>t(s,c,u,e).send(),$post:e=>t(s,c,u,e).send().then(e=>e.body),$path:()=>"".concat(s).concat(c)},me:{get:e=>t(s,"/me","GET",e).json(),$get:e=>t(s,"/me","GET",e).json().then(e=>e.body),$path:()=>"".concat(s).concat("/me")},paypay:{payment:{get:e=>t(s,l,"GET",e).text(),$get:e=>t(s,l,"GET",e).text().then(e=>e.body),post:e=>t(s,l,u,e).send(),$post:e=>t(s,l,u,e).send().then(e=>e.body),$path:()=>"".concat(s).concat(l)},qrcode:{get:e=>t(s,d,"GET",e).text(),$get:e=>t(s,d,"GET",e).text().then(e=>e.body),post:e=>t(s,d,u,e).text(),$post:e=>t(s,d,u,e).text().then(e=>e.body),$path:()=>"".concat(s).concat(d)},get:e=>t(s,i,"GET",e).text(),$get:e=>t(s,i,"GET",e).text().then(e=>e.body),$path:()=>"".concat(s).concat(i)},session:{post:e=>t(s,m,u,e).json(),$post:e=>t(s,m,u,e).json().then(e=>e.body),delete:e=>t(s,m,x,e).json(),$delete:e=>t(s,m,x,e).json().then(e=>e.body),$path:()=>"".concat(s).concat(m)},tasks:{_taskId:e=>{let a="".concat(p,"/").concat(e);return{patch:e=>t(s,a,j,e).json(),$patch:e=>t(s,a,j,e).json().then(e=>e.body),delete:e=>t(s,a,x,e).json(),$delete:e=>t(s,a,x,e).json().then(e=>e.body),$path:()=>"".concat(s).concat(a)}},di:{get:e=>t(s,h,"GET",e).json(),$get:e=>t(s,h,"GET",e).json().then(e=>e.body),$path:()=>"".concat(s).concat(h)},get:e=>t(s,p,"GET",e).json(),$get:e=>t(s,p,"GET",e).json().then(e=>e.body),post:e=>t(s,p,u,e).json(),$post:e=>t(s,p,u,e).json().then(e=>e.body),patch:e=>t(s,p,j,e).json(),$patch:e=>t(s,p,j,e).json().then(e=>e.body),delete:e=>t(s,p,x,e).json(),$delete:e=>t(s,p,x,e).json().then(e=>e.body),$path:e=>"".concat(s).concat(p).concat(e&&e.query?"?".concat((0,n._K)(e.query)):"")},get:e=>t(s,"","GET",e).text(),$get:e=>t(s,"","GET",e).text().then(e=>e.body),$path:()=>"".concat(s)}})((0,s.Z)(o.Z.create({baseURL:r.env.NEXT_PUBLIC_API_BASE_URL,withCredentials:!0})))},3571:function(e,a,t){"use strict";let s;t.d(a,{l:function(){return c}});var n=t(3977),o=t(1259),r=t(3454);let c=()=>{if(void 0!==s)return s;if(void 0!==r.env.NEXT_PUBLIC_AUTH_EMULATOR_URL){let e=(0,o.v0)((0,n.ZF)({apiKey:"fake-api-key",authDomain:location.hostname}));return(0,o.S$)(e,r.env.NEXT_PUBLIC_AUTH_EMULATOR_URL,{disableWarnings:!0}),s=e,e}{let e=JSON.parse(""),a=(0,o.v0)((0,n.ZF)(e));return s=a,a}}},7889:function(e){e.exports={container:"Footer_container__Dj1D9",content:"Footer_content__a1cH7",logoSection:"Footer_logoSection__60cxm",logo:"Footer_logo__C9vo8",navSection:"Footer_navSection__F3PZo",navItem:"Footer_navItem__8Yj1Y",navLabel:"Footer_navLabel__NydQx",subNavItem:"Footer_subNavItem__AWV74"}},1293:function(e){e.exports={container:"FormSection_container__uyAoo",form:"FormSection_form__EWuLg",title:"FormSection_title__z0Djb",formGroup:"FormSection_formGroup__HwLYb",nameArea:"FormSection_nameArea__xAbMX",nameInput:"FormSection_nameInput__jGED_",error:"FormSection_error__zfi1E",mailGroup:"FormSection_mailGroup__nAU6H",createButton:"FormSection_createButton__Hii3X",progressContainer:"FormSection_progressContainer__ucPBo",progressStep:"FormSection_progressStep__pnB3Z",activeStep:"FormSection_activeStep__ndpc0",formLabel:"FormSection_formLabel__LAY7m",buttonContainer:"FormSection_buttonContainer__P9kvK",changeStepButton:"FormSection_changeStepButton__cTCfj",certificationMail:"FormSection_certificationMail__tlBtB",mail:"FormSection_mail__xfX4_",codeInputContainer:"FormSection_codeInputContainer__LHqbs",codeInput:"FormSection_codeInput__RvdeG",resendButton:"FormSection_resendButton__kvM7j"}},1014:function(e){e.exports={container:"Header_container__3JNoS",left:"Header_left__2EE3i",right:"Header_right__IaiY4",account:"Header_account__usRDz",menuButton:"Header_menuButton__mlszh",open:"Header_open__jNVWy",menu:"Header_menu__UYmdC",dropdown:"Header_dropdown__f5upL",menuItem:"Header_menuItem__DuO3o"}}},function(e){e.O(0,[661,804,478,774,888,179],function(){return e(e.s=5975)}),_N_E=e.O()}]);